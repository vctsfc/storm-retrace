#!/usr/bin/env node
/**
 * Generate nexrad-stations.geojson from authoritative NCEI coordinates.
 * Run: node scripts/generateStationsGeoJSON.mjs
 */

import { writeFileSync } from 'fs';
import { join, dirname } from 'path';
import { fileURLToPath } from 'url';

const __dirname = dirname(fileURLToPath(import.meta.url));

// Authoritative NEXRAD coordinates from NOAA NCEI HOMR
// Source: https://www.ncei.noaa.gov/access/homr/file/nexrad-stations.txt
// Elevation in feet MSL, lat/lon WGS84
const STATIONS = {
  KABR: { name: "Aberdeen, SD", lat: 45.455833, lon: -98.413333, elev: 1383 },
  KABX: { name: "Albuquerque, NM", lat: 35.149722, lon: -106.823880, elev: 5951 },
  KAKQ: { name: "Wakefield, VA", lat: 36.984050, lon: -77.007361, elev: 255 },
  KAMA: { name: "Amarillo, TX", lat: 35.233333, lon: -101.709270, elev: 3703 },
  KAMX: { name: "Miami, FL", lat: 25.611083, lon: -80.412667, elev: 111 },
  KAPX: { name: "Gaylord, MI", lat: 44.906350, lon: -84.719533, elev: 1561 },
  KARX: { name: "La Crosse, WI", lat: 43.822778, lon: -91.191111, elev: 1357 },
  KATX: { name: "Seattle, WA", lat: 48.194611, lon: -122.495690, elev: 642 },
  KBBX: { name: "Beale AFB, CA", lat: 39.495639, lon: -121.631610, elev: 221 },
  KBGM: { name: "Binghamton, NY", lat: 42.199694, lon: -75.984722, elev: 1703 },
  KBHX: { name: "Eureka, CA", lat: 40.498583, lon: -124.292160, elev: 2516 },
  KBIS: { name: "Bismarck, ND", lat: 46.770833, lon: -100.760550, elev: 1755 },
  KBLX: { name: "Billings, MT", lat: 45.853778, lon: -108.606800, elev: 3703 },
  KBMX: { name: "Birmingham, AL", lat: 33.172417, lon: -86.770167, elev: 759 },
  KBOX: { name: "Boston, MA", lat: 41.955778, lon: -71.136861, elev: 232 },
  KBRO: { name: "Brownsville, TX", lat: 25.916000, lon: -97.418967, elev: 88 },
  KBUF: { name: "Buffalo, NY", lat: 42.948789, lon: -78.736781, elev: 790 },
  KBYX: { name: "Key West, FL", lat: 24.597500, lon: -81.703167, elev: 89 },
  KCAE: { name: "Columbia, SC", lat: 33.948722, lon: -81.118278, elev: 345 },
  KCBW: { name: "Houlton, ME", lat: 46.039250, lon: -67.806431, elev: 860 },
  KCBX: { name: "Boise, ID", lat: 43.490217, lon: -116.236030, elev: 3172 },
  KCCX: { name: "State College, PA", lat: 40.923167, lon: -78.003722, elev: 2486 },
  KCLE: { name: "Cleveland, OH", lat: 41.413217, lon: -81.859867, elev: 860 },
  KCLX: { name: "Charleston, SC", lat: 32.655528, lon: -81.042194, elev: 229 },
  KCRP: { name: "Corpus Christi, TX", lat: 27.784017, lon: -97.511250, elev: 142 },
  KCXX: { name: "Burlington, VT", lat: 44.511000, lon: -73.166431, elev: 431 },
  KCYS: { name: "Cheyenne, WY", lat: 41.151919, lon: -104.806030, elev: 6193 },
  KDAX: { name: "Sacramento, CA", lat: 38.501111, lon: -121.677830, elev: 144 },
  KDDC: { name: "Dodge City, KS", lat: 37.760833, lon: -99.968889, elev: 2671 },
  KDFX: { name: "Laughlin AFB, TX", lat: 29.273139, lon: -100.280330, elev: 1196 },
  KDGX: { name: "Brandon, MS", lat: 32.279944, lon: -89.984444, elev: 609 },
  KDIX: { name: "Philadelphia, PA", lat: 39.947089, lon: -74.410731, elev: 230 },
  KDLH: { name: "Duluth, MN", lat: 46.836944, lon: -92.209722, elev: 1542 },
  KDMX: { name: "Des Moines, IA", lat: 41.731200, lon: -93.722869, elev: 1095 },
  KDOX: { name: "Dover AFB, DE", lat: 38.825767, lon: -75.440117, elev: 164 },
  KDTX: { name: "Detroit, MI", lat: 42.700000, lon: -83.471667, elev: 1216 },
  KDVN: { name: "Davenport, IA", lat: 41.611667, lon: -90.580833, elev: 851 },
  KDYX: { name: "Dyess AFB, TX", lat: 32.538500, lon: -99.254333, elev: 1582 },
  KEAX: { name: "Kansas City, MO", lat: 38.810250, lon: -94.264472, elev: 1092 },
  KEMX: { name: "Tucson, AZ", lat: 31.893650, lon: -110.630250, elev: 5319 },
  KENX: { name: "Albany, NY", lat: 42.586556, lon: -74.064083, elev: 1935 },
  KEOX: { name: "Fort Rucker, AL", lat: 31.460556, lon: -85.459389, elev: 537 },
  KEPZ: { name: "El Paso, TX", lat: 31.873056, lon: -106.698000, elev: 4218 },
  KESX: { name: "Las Vegas, NV", lat: 35.701350, lon: -114.891650, elev: 4948 },
  KEVX: { name: "Eglin AFB, FL", lat: 30.565033, lon: -85.921667, elev: 221 },
  KEWX: { name: "Austin/San Antonio, TX", lat: 29.704056, lon: -98.028611, elev: 767 },
  KEYX: { name: "Edwards AFB, CA", lat: 35.097850, lon: -117.560750, elev: 2873 },
  KFCX: { name: "Roanoke, VA", lat: 37.024400, lon: -80.273969, elev: 2965 },
  KFDR: { name: "Altus AFB, OK", lat: 34.362194, lon: -98.976667, elev: 1315 },
  KFDX: { name: "Cannon AFB, NM", lat: 34.634167, lon: -103.618880, elev: 4698 },
  KFFC: { name: "Atlanta, GA", lat: 33.363550, lon: -84.565950, elev: 972 },
  KFSD: { name: "Sioux Falls, SD", lat: 43.587778, lon: -96.729444, elev: 1495 },
  KFSX: { name: "Flagstaff, AZ", lat: 34.574333, lon: -111.198440, elev: 7514 },
  KFTG: { name: "Denver, CO", lat: 39.786639, lon: -104.545800, elev: 5611 },
  KFWS: { name: "Dallas/Fort Worth, TX", lat: 32.573000, lon: -97.303150, elev: 777 },
  KGGW: { name: "Glasgow, MT", lat: 48.206361, lon: -106.624690, elev: 2384 },
  KGJX: { name: "Grand Junction, CO", lat: 39.062169, lon: -108.213760, elev: 10101 },
  KGLD: { name: "Goodland, KS", lat: 39.366944, lon: -101.700270, elev: 3716 },
  KGRB: { name: "Green Bay, WI", lat: 44.498633, lon: -88.111111, elev: 823 },
  KGRK: { name: "Fort Hood, TX", lat: 30.721833, lon: -97.382944, elev: 603 },
  KGRR: { name: "Grand Rapids, MI", lat: 42.893889, lon: -85.544889, elev: 875 },
  KGSP: { name: "Greer, SC", lat: 34.883306, lon: -82.219833, elev: 1069 },
  KGWX: { name: "Columbus AFB, MS", lat: 33.896917, lon: -88.329194, elev: 590 },
  KGYX: { name: "Portland, ME", lat: 43.891306, lon: -70.256361, elev: 474 },
  KHDC: { name: "Hammond, LA", lat: 30.519300, lon: -90.407400, elev: 43 },
  KHDX: { name: "Holloman AFB, NM", lat: 33.077000, lon: -106.120030, elev: 4270 },
  KHGX: { name: "Houston, TX", lat: 29.471900, lon: -95.078733, elev: 115 },
  KHNX: { name: "Hanford, CA", lat: 36.314181, lon: -119.632130, elev: 340 },
  KHPX: { name: "Fort Campbell, KY", lat: 36.736972, lon: -87.285583, elev: 613 },
  KHTX: { name: "Huntsville, AL", lat: 34.930556, lon: -86.083611, elev: 1859 },
  KICT: { name: "Wichita, KS", lat: 37.654444, lon: -97.443056, elev: 1400 },
  KICX: { name: "Cedar City, UT", lat: 37.591050, lon: -112.862180, elev: 10757 },
  KILN: { name: "Cincinnati, OH", lat: 39.420483, lon: -83.821450, elev: 1170 },
  KILX: { name: "Lincoln, IL", lat: 40.150500, lon: -89.336792, elev: 731 },
  KIND: { name: "Indianapolis, IN", lat: 39.707500, lon: -86.280278, elev: 887 },
  KINX: { name: "Tulsa, OK", lat: 36.175131, lon: -95.564161, elev: 749 },
  KIWA: { name: "Phoenix, AZ", lat: 33.289233, lon: -111.669910, elev: 1426 },
  KIWX: { name: "Fort Wayne, IN", lat: 41.358611, lon: -85.700000, elev: 1056 },
  KJAX: { name: "Jacksonville, FL", lat: 30.484633, lon: -81.701900, elev: 160 },
  KJGX: { name: "Robins AFB, GA", lat: 32.675683, lon: -83.350833, elev: 618 },
  KJKL: { name: "Jackson, KY", lat: 37.590833, lon: -83.313056, elev: 1461 },
  KLBB: { name: "Lubbock, TX", lat: 33.654139, lon: -101.814160, elev: 3378 },
  KLCH: { name: "Lake Charles, LA", lat: 30.125306, lon: -93.215889, elev: 137 },
  KLGX: { name: "Langley Hill, WA", lat: 47.116944, lon: -124.106660, elev: 366 },
  KLIX: { name: "New Orleans, LA", lat: 30.336667, lon: -89.825417, elev: 179 },
  KLNX: { name: "North Platte, NE", lat: 41.957944, lon: -100.576220, elev: 3113 },
  KLOT: { name: "Chicago, IL", lat: 41.604444, lon: -88.084444, elev: 760 },
  KLRX: { name: "Elko, NV", lat: 40.739550, lon: -116.802700, elev: 6895 },
  KLSX: { name: "St. Louis, MO", lat: 38.698611, lon: -90.682778, elev: 722 },
  KLTX: { name: "Wilmington, NC", lat: 33.989150, lon: -78.429108, elev: 145 },
  KLVX: { name: "Louisville, KY", lat: 37.975278, lon: -85.943889, elev: 833 },
  KLWX: { name: "Sterling, VA", lat: 38.976111, lon: -77.487500, elev: 404 },
  KLZK: { name: "Little Rock, AR", lat: 34.836500, lon: -92.262194, elev: 649 },
  KMAF: { name: "Midland/Odessa, TX", lat: 31.943461, lon: -102.189250, elev: 2962 },
  KMAX: { name: "Medford, OR", lat: 42.081169, lon: -122.717360, elev: 7561 },
  KMBX: { name: "Minot AFB, ND", lat: 48.393056, lon: -100.864440, elev: 1590 },
  KMHX: { name: "Morehead City, NC", lat: 34.775908, lon: -76.876189, elev: 145 },
  KMKX: { name: "Milwaukee, WI", lat: 42.967900, lon: -88.550667, elev: 1023 },
  KMLB: { name: "Melbourne, FL", lat: 28.113194, lon: -80.654083, elev: 149 },
  KMOB: { name: "Mobile, AL", lat: 30.679444, lon: -88.240000, elev: 289 },
  KMPX: { name: "Minneapolis, MN", lat: 44.848889, lon: -93.565528, elev: 1101 },
  KMQT: { name: "Marquette, MI", lat: 46.531111, lon: -87.548333, elev: 1525 },
  KMRX: { name: "Knoxville, TN", lat: 36.168611, lon: -83.401944, elev: 1434 },
  KMSX: { name: "Missoula, MT", lat: 47.041000, lon: -113.986220, elev: 7978 },
  KMTX: { name: "Salt Lake City, UT", lat: 41.262778, lon: -112.447770, elev: 6594 },
  KMUX: { name: "San Francisco, CA", lat: 37.155222, lon: -121.898440, elev: 3550 },
  KMVX: { name: "Grand Forks, ND", lat: 47.527778, lon: -97.325556, elev: 1083 },
  KMXX: { name: "Maxwell AFB, AL", lat: 32.536650, lon: -85.789750, elev: 560 },
  KNKX: { name: "San Diego, CA", lat: 32.919017, lon: -117.041800, elev: 1052 },
  KNQA: { name: "Memphis, TN", lat: 35.344722, lon: -89.873333, elev: 435 },
  KOAX: { name: "Omaha, NE", lat: 41.320369, lon: -96.366819, elev: 1262 },
  KOHX: { name: "Nashville, TN", lat: 36.247222, lon: -86.562500, elev: 676 },
  KOKX: { name: "Brookhaven, NY", lat: 40.865528, lon: -72.863917, elev: 199 },
  KOTX: { name: "Spokane, WA", lat: 47.680417, lon: -117.626770, elev: 2449 },
  KPAH: { name: "Paducah, KY", lat: 37.068333, lon: -88.771944, elev: 506 },
  KPBZ: { name: "Pittsburgh, PA", lat: 40.531717, lon: -80.217967, elev: 1266 },
  KPDT: { name: "Pendleton, OR", lat: 45.690650, lon: -118.852930, elev: 1580 },
  KPOE: { name: "Fort Polk, LA", lat: 31.155278, lon: -92.976111, elev: 473 },
  KPUX: { name: "Pueblo, CO", lat: 38.459550, lon: -104.181350, elev: 5363 },
  KRAX: { name: "Raleigh, NC", lat: 35.665519, lon: -78.489750, elev: 462 },
  KRGX: { name: "Reno, NV", lat: 39.754056, lon: -119.462020, elev: 8396 },
  KRIW: { name: "Riverton, WY", lat: 43.066089, lon: -108.477300, elev: 5633 },
  KRLX: { name: "Charleston, WV", lat: 38.311111, lon: -81.722778, elev: 1213 },
  KRTX: { name: "Portland, OR", lat: 45.715039, lon: -122.965000, elev: 1728 },
  KSFX: { name: "Pocatello, ID", lat: 43.105600, lon: -112.686130, elev: 4539 },
  KSGF: { name: "Springfield, MO", lat: 37.235239, lon: -93.400419, elev: 1375 },
  KSHV: { name: "Shreveport, LA", lat: 32.450833, lon: -93.841250, elev: 387 },
  KSJT: { name: "San Angelo, TX", lat: 31.371278, lon: -100.492500, elev: 2004 },
  KSOX: { name: "Santa Ana Mts, CA", lat: 33.817733, lon: -117.636000, elev: 3106 },
  KSRX: { name: "Fort Smith, AR", lat: 35.290417, lon: -94.361889, elev: 737 },
  KTBW: { name: "Tampa Bay, FL", lat: 27.705500, lon: -82.401778, elev: 122 },
  KTFX: { name: "Great Falls, MT", lat: 47.459583, lon: -111.385330, elev: 3805 },
  KTLH: { name: "Tallahassee, FL", lat: 30.397583, lon: -84.328944, elev: 177 },
  KTLX: { name: "Oklahoma City, OK", lat: 35.333361, lon: -97.277761, elev: 1278 },
  KTWX: { name: "Topeka, KS", lat: 38.996950, lon: -96.232550, elev: 1415 },
  KTYX: { name: "Fort Drum, NY", lat: 43.755694, lon: -75.679861, elev: 1960 },
  KUDX: { name: "Rapid City, SD", lat: 44.124722, lon: -102.830000, elev: 3195 },
  KUEX: { name: "Hastings, NE", lat: 40.320833, lon: -98.441944, elev: 2057 },
  KVAX: { name: "Moody AFB, GA", lat: 30.890278, lon: -83.001806, elev: 330 },
  KVBX: { name: "Vandenberg AFB, CA", lat: 34.838550, lon: -120.397910, elev: 1354 },
  KVNX: { name: "Vance AFB, OK", lat: 36.740617, lon: -98.127717, elev: 1258 },
  KVTX: { name: "Los Angeles, CA", lat: 34.412017, lon: -119.178750, elev: 2807 },
  KVWX: { name: "Evansville, IN", lat: 38.260250, lon: -87.724528, elev: 625 },
  KYUX: { name: "Yuma, AZ", lat: 32.495281, lon: -114.656710, elev: 239 },

  // Alaska
  PABC: { name: "Bethel, AK", lat: 60.791944, lon: -161.876380, elev: 193 },
  PACG: { name: "Sitka, AK", lat: 56.852778, lon: -135.529160, elev: 272 },
  PAEC: { name: "Nome, AK", lat: 64.511389, lon: -165.295000, elev: 90 },
  PAHG: { name: "Anchorage, AK", lat: 60.725914, lon: -151.351460, elev: 356 },
  PAIH: { name: "Middleton Island, AK", lat: 59.460767, lon: -146.303440, elev: 132 },
  PAKC: { name: "King Salmon, AK", lat: 58.679444, lon: -156.629440, elev: 144 },
  PAPD: { name: "Fairbanks, AK", lat: 65.035114, lon: -147.501430, elev: 2707 },

  // Hawaii
  PHKI: { name: "South Kauai, HI", lat: 21.893889, lon: -159.552500, elev: 340 },
  PHKM: { name: "Kohala, HI", lat: 20.125278, lon: -155.777770, elev: 3966 },
  PHMO: { name: "Molokai, HI", lat: 21.132778, lon: -157.180270, elev: 1444 },
  PHWA: { name: "South Shore, HI", lat: 19.095000, lon: -155.568880, elev: 1461 },

  // US Territories
  TJUA: { name: "San Juan, PR", lat: 18.115667, lon: -66.078167, elev: 2958 },
  PGUA: { name: "Andersen AFB, GU", lat: 13.455833, lon: 144.811111, elev: 386 },
};

// Timezone mapping per station (handles border cases explicitly)
const TIMEZONE = {
  // Default by prefix
  _default_K: null, // resolved per station below
  _default_PA: "America/Anchorage",
  _default_PH: "Pacific/Honolulu",
  _default_TJ: "America/Puerto_Rico",
  _default_PG: "Pacific/Guam",

  // CONUS - explicit per station
  KABR: "America/Chicago",
  KABX: "America/Denver",
  KAKQ: "America/New_York",
  KAMA: "America/Chicago",
  KAMX: "America/New_York",
  KAPX: "America/New_York",
  KARX: "America/Chicago",
  KATX: "America/Los_Angeles",
  KBBX: "America/Los_Angeles",
  KBGM: "America/New_York",
  KBHX: "America/Los_Angeles",
  KBIS: "America/Chicago",
  KBLX: "America/Denver",
  KBMX: "America/Chicago",
  KBOX: "America/New_York",
  KBRO: "America/Chicago",
  KBUF: "America/New_York",
  KBYX: "America/New_York",
  KCAE: "America/New_York",
  KCBW: "America/New_York",
  KCBX: "America/Boise",
  KCCX: "America/New_York",
  KCLE: "America/New_York",
  KCLX: "America/New_York",
  KCRP: "America/Chicago",
  KCXX: "America/New_York",
  KCYS: "America/Denver",
  KDAX: "America/Los_Angeles",
  KDDC: "America/Chicago",
  KDFX: "America/Chicago",
  KDGX: "America/Chicago",
  KDIX: "America/New_York",
  KDLH: "America/Chicago",
  KDMX: "America/Chicago",
  KDOX: "America/New_York",
  KDTX: "America/New_York",
  KDVN: "America/Chicago",
  KDYX: "America/Chicago",
  KEAX: "America/Chicago",
  KEMX: "America/Phoenix",
  KENX: "America/New_York",
  KEOX: "America/Chicago",
  KEPZ: "America/Denver",
  KESX: "America/Los_Angeles",
  KEVX: "America/Chicago",
  KEWX: "America/Chicago",
  KEYX: "America/Los_Angeles",
  KFCX: "America/New_York",
  KFDR: "America/Chicago",
  KFDX: "America/Denver",
  KFFC: "America/New_York",
  KFSD: "America/Chicago",
  KFSX: "America/Phoenix",
  KFTG: "America/Denver",
  KFWS: "America/Chicago",
  KGGW: "America/Denver",
  KGJX: "America/Denver",
  KGLD: "America/Chicago",
  KGRB: "America/Chicago",
  KGRK: "America/Chicago",
  KGRR: "America/New_York",
  KGSP: "America/New_York",
  KGWX: "America/Chicago",
  KGYX: "America/New_York",
  KHDC: "America/Chicago",
  KHDX: "America/Denver",
  KHGX: "America/Chicago",
  KHNX: "America/Los_Angeles",
  KHPX: "America/Chicago",
  KHTX: "America/Chicago",
  KICT: "America/Chicago",
  KICX: "America/Denver",
  KILN: "America/New_York",
  KILX: "America/Chicago",
  KIND: "America/New_York",
  KINX: "America/Chicago",
  KIWA: "America/Phoenix",
  KIWX: "America/New_York",
  KJAX: "America/New_York",
  KJGX: "America/New_York",
  KJKL: "America/New_York",
  KLBB: "America/Chicago",
  KLCH: "America/Chicago",
  KLGX: "America/Los_Angeles",
  KLIX: "America/Chicago",
  KLNX: "America/Chicago",
  KLOT: "America/Chicago",
  KLRX: "America/Los_Angeles",
  KLSX: "America/Chicago",
  KLTX: "America/New_York",
  KLVX: "America/New_York",
  KLWX: "America/New_York",
  KLZK: "America/Chicago",
  KMAF: "America/Chicago",
  KMAX: "America/Los_Angeles",
  KMBX: "America/Chicago",
  KMHX: "America/New_York",
  KMKX: "America/Chicago",
  KMLB: "America/New_York",
  KMOB: "America/Chicago",
  KMPX: "America/Chicago",
  KMQT: "America/New_York",
  KMRX: "America/New_York",
  KMSX: "America/Denver",
  KMTX: "America/Denver",
  KMUX: "America/Los_Angeles",
  KMVX: "America/Chicago",
  KMXX: "America/Chicago",
  KNKX: "America/Los_Angeles",
  KNQA: "America/Chicago",
  KOAX: "America/Chicago",
  KOHX: "America/Chicago",
  KOKX: "America/New_York",
  KOTX: "America/Los_Angeles",
  KPAH: "America/Chicago",
  KPBZ: "America/New_York",
  KPDT: "America/Los_Angeles",
  KPOE: "America/Chicago",
  KPUX: "America/Denver",
  KRAX: "America/New_York",
  KRGX: "America/Los_Angeles",
  KRIW: "America/Denver",
  KRLX: "America/New_York",
  KRTX: "America/Los_Angeles",
  KSFX: "America/Boise",
  KSGF: "America/Chicago",
  KSHV: "America/Chicago",
  KSJT: "America/Chicago",
  KSOX: "America/Los_Angeles",
  KSRX: "America/Chicago",
  KTBW: "America/New_York",
  KTFX: "America/Denver",
  KTLH: "America/New_York",
  KTLX: "America/Chicago",
  KTWX: "America/Chicago",
  KTYX: "America/New_York",
  KUDX: "America/Denver",
  KUEX: "America/Chicago",
  KVAX: "America/New_York",
  KVBX: "America/Los_Angeles",
  KVNX: "America/Chicago",
  KVTX: "America/Los_Angeles",
  KVWX: "America/Chicago",
  KYUX: "America/Phoenix",
};

function getTz(id) {
  if (TIMEZONE[id]) return TIMEZONE[id];
  if (id.startsWith('PA')) return "America/Anchorage";
  if (id.startsWith('PH')) return "Pacific/Honolulu";
  if (id.startsWith('TJ')) return "America/Puerto_Rico";
  if (id.startsWith('PG')) return "Pacific/Guam";
  return "UTC";
}

// Convert feet to meters (rounded)
function ftToM(ft) {
  return Math.round(ft * 0.3048);
}

const features = Object.entries(STATIONS).map(([id, s]) => ({
  type: "Feature",
  geometry: {
    type: "Point",
    coordinates: [
      Math.round(s.lon * 1000000) / 1000000,
      Math.round(s.lat * 1000000) / 1000000,
    ],
  },
  properties: {
    id,
    name: s.name,
    elevation: ftToM(s.elev),
    tz: getTz(id),
  },
}));

const geojson = {
  type: "FeatureCollection",
  features,
};

const outPath = join(__dirname, '..', 'public', 'nexrad-stations.geojson');
writeFileSync(outPath, JSON.stringify(geojson, null, 2) + '\n');

console.log(`Generated ${features.length} stations → ${outPath}`);

// Spot-check some known problem stations
const checks = [
  { id: 'KCYS', expectLat: 41.15, expectLon: -104.81 },
  { id: 'KTLX', expectLat: 35.33, expectLon: -97.28 },
  { id: 'KLNX', expectLat: 41.96, expectLon: -100.58 },
];
for (const c of checks) {
  const f = features.find(f => f.properties.id === c.id);
  if (f) {
    const [lon, lat] = f.geometry.coordinates;
    const latOk = Math.abs(lat - c.expectLat) < 0.02;
    const lonOk = Math.abs(lon - c.expectLon) < 0.02;
    console.log(`  ${c.id}: [${lon}, ${lat}] ${latOk && lonOk ? '✓' : '✗ MISMATCH'}`);
  }
}
